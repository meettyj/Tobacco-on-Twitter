## Approach
Using ban and SF keywords to filter posts from subreddit 'electronic cigarette', 
and then do sentiment analysis in both posts and comments.

## Conclusion
- Some posts filtered by ban keywords or SF keywords ([Approach 1 Simple Combination](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/figures/subreddit_electronic_cigarette_ban_and_SF_keywords.md#approach-1-simple-combination)) are not related to San Francisco. 
  - e.g. Massachusetts: Ashland Board of Health to vote on whether to ban flavored e-cigarettes
  - e.g. NYC latest on the flavor ban bandwagon
- However, if we concatenate each word in ban keywords with each word in SF keywords to filter the data ([Approach 2 Cross Concatenation](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/figures/subreddit_electronic_cigarette_ban_and_SF_keywords.md#approach-2-cross-concatenation)), we can only get a few data. In this case, we cannot generate the sentiment trend as we did in paper.
- Semtiment trends are made for **[Approach 1 Simple Combination]**.

## Policy explaination
The policy can be divided into three time points: **Proposal** (June 20, 2017), **Approval** (June 5, 2018) and **Enforcement** (Jan 1, 2019). In this case, the regression line before the first dotted line is based on 14 months (April 2016 - May 2017), the regression line before the second dotted line is based on 12 months (June 2017 - May 2018), the regression line before the third dotted line is based on 7 months (June 2018 - December 2018), while the last regression line is based on the remaining months (January 2019 - April 2019).

## Number of submissions by ban and SF keywords
### Approach 1 Simple Combination: 
```
ban keywords: ['ban']
SF keywords: ['san francisco', 'sf', 'sfo', 'san fran']

ban_SF_keywords = ban keywords + SF keywords (['ban', 'san francisco', 'sf', 'sfo', 'san fran'])
Following results are generated by ban_SF_keywords.
```
- 2016-04: 11
- 2016-05: 19
- 2016-06: 7
- 2016-07: 8
- 2016-08: 6
- 2016-09: 7
- 2016-10: 4
- 2016-11: 1
- 2016-12: 3
- 2017-01: 6
- 2017-02: 5
- 2017-03: 11
- 2017-04: 4
- 2017-05: 9
- **2017-06 (proposal): 21**
- 2017-07: 12
- 2017-08: 10
- 2017-09: 11
- 2017-10: 12
- 2017-11: 8
- 2017-12: 5
- 2018-01: 14
- 2018-02: 7
- 2018-03: 14
- 2018-04: 14
- 2018-05: 15
- **2018-06 (approval): 32**
- 2018-07: 11
- 2018-08: 18
- 2018-09: 26
- 2018-10: 16
- 2018-11: 31
- 2018-12: 11
- **2019-01 (enforcement): 22**
- 2019-02: 13
- 2019-03: 42
- 2019-04: 26

### Approach 2 Cross Concatenation:
```
ban keywords: ['ban', 'sale', 'sales']
SF keywords: ['san francisco', 'sf', 'sfo', 'san fran']

Following results are generated by concatenation of each ban word and each SF word.
```
- 2016-04: 0
- 2016-05: 0
- 2016-06: 0
- 2016-07: 0
- 2016-08: 0
- 2016-09: 0
- 2016-10: 0
- 2016-11: 0
- 2016-12: 0
- 2017-01: 0
- 2017-02: 0
- 2017-03: 0
- 2017-04: 1
- 2017-05: 1
- **2017-06 (proposal): 10**
- 2017-07: 3
- 2017-08: 2
- 2017-09: 3
- 2017-10: 0
- 2017-11: 0
- 2017-12: 0
- 2018-01: 1
- 2018-02: 0
- 2018-03: 1
- 2018-04: 1
- 2018-05: 3
- **2018-06 (approval): 8**
- 2018-07: 0
- 2018-08: 0
- 2018-09: 0
- 2018-10: 0
- 2018-11: 0
- 2018-12: 0
- **2019-01 (enforcement): 0**
- 2019-02: 0
- 2019-03: 6
- 2019-04: 5


## Check the data generated by [Approach 1 Simple Combination]

- [electronic_cigarette_ban_and_SF_keywords_collection_2017-06.csv](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/results/electronic_cigarette_ban_and_SF_keywords_collection/electronic_cigarette_ban_and_SF_keywords_collection_2017-06.csv)
- [electronic_cigarette_ban_and_SF_keywords_collection_2018-06.csv](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/results/electronic_cigarette_ban_and_SF_keywords_collection/electronic_cigarette_ban_and_SF_keywords_collection_2018-06.csv)
- [electronic_cigarette_ban_and_SF_keywords_collection_2019-01.csv](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/results/electronic_cigarette_ban_and_SF_keywords_collection/electronic_cigarette_ban_and_SF_keywords_collection_2019-01.csv)
- [electronic_cigarette_ban_and_SF_keywords_collection_2019-02.csv](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/results/electronic_cigarette_ban_and_SF_keywords_collection/electronic_cigarette_ban_and_SF_keywords_collection_2019-02.csv)
- [electronic_cigarette_ban_and_SF_keywords_collection_2019-03.csv](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/results/electronic_cigarette_ban_and_SF_keywords_collection/electronic_cigarette_ban_and_SF_keywords_collection_2019-03.csv)
- [electronic_cigarette_ban_and_SF_keywords_collection_2019-04.csv](https://github.com/meettyj/Alcohol-on-Twitter/blob/master/reddit/results/electronic_cigarette_ban_and_SF_keywords_collection/electronic_cigarette_ban_and_SF_keywords_collection_2019-04.csv)

## Sentiment Trend of posts filtered in [Approach 1 Simple Combination]

<p align="center">
  <img src="https://github.com/meettyj/Alcohol-on-Twitter/raw/master/reddit/figures/screenshots/submissions/sentiment_electronic_cigarette_ban_and_SF_keywords_posts_number.png" />
</p>

<p align="center">
  <img src="https://github.com/meettyj/Alcohol-on-Twitter/raw/master/reddit/figures/screenshots/submissions/sentiment_electronic_cigarette_ban_and_SF_keywords_posts_proportion.png" />
</p>

